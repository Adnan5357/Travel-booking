<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout - Payment Method</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons (Card icons, check/x marks) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="payment.css">
    <style>
        
    </style>
</head>
<body>
    <!-- Top Navigation / Breadcrumbs -->
    <header class="top-nav">
        <div class="logo">
            <div class="logo-circle">L</div> Travels & Tours
        </div>
        <nav class="flex space-x-4">
            <span class="nav-item active">Payment method</span>
        </nav>
    </header>

    <div class="main-content">
        <!-- Credit Card Display (Left Side) -->
        <div class="card-display">
            <div class="credit-card">
                <div class="flex justify-between items-start">
                    <div class="credit-card-chip"></div>
                    <div class="credit-card-bank">BANK</div>
                </div>
                <div class="credit-card-info" id="card-number-display">1234 5678 9012 3456</div>
                <div class="flex justify-between items-end">
                    <div class="credit-card-valid">
                        <span id="expiry-month-display">12</span>/<span id="expiry-year-display">24</span>
                    </div>
                    <div class="credit-card-name" id="cardholder-name-display">CARDHOLDER NAME</div>
                </div>
                <div class="credit-card-wifi">
                    <i class="fas fa-wifi"></i>
                </div>
                <!-- Simple representation of the back of the card for depth -->
                <div class="credit-card-back">
                    <div class="stripe"></div>
                    <div class="cvv-area">CVV</div>
                </div>
            </div>
        </div>

        <!-- Payment Form (Right Side) -->
        <div class="payment-form-container">
            <h2>Payment Details</h2>
            <form action="process_payment.php" method="POST">
                <div class="input-wrapper card-number-input">
                    <label for="card_number">Card Number</label>
                    <input type="text" id="card_number" name="card_number" placeholder="**** **** **** ****" minlength="16" maxlength="19" required>
                    <i class="fab fa-cc-visa card-icon"></i> <!-- Example card icon -->
                </div>

                <div class="input-wrapper">
                    <label for="cardholder_name">Cardholder Name</label>
                    <input type="text" id="cardholder_name" name="cardholder_name" required>
                </div>

                <div class="grid grid-cols-3 gap-4">
                    <div class="input-wrapper col-span-1">
                        <label for="expiry_month">Month</label>
                        <select id="expiry_month" name="expiry_month" required>
                            <option value="">MM</option>
                            <option value="01">01</option><option value="02">02</option><option value="03">03</option>
                            <option value="04">04</option><option value="05">05</option><option value="06">06</option>
                            <option value="07">07</option><option value="08">08</option><option value="09">09</option>
                            <option value="10">10</option><option value="11">11</option><option value="12">12</option>
                        </select>
                    </div>
                    <div class="input-wrapper col-span-1">
                        <label for="expiry_year">Year</label>
                        <select id="expiry_year" name="expiry_year" required>
                            <option value="">YY</option>
                            <!-- Years will be dynamically generated by JS -->
                        </select>
                    </div>
                    <div class="input-wrapper col-span-1">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" placeholder="123" minlength="3" maxlength="4" required>
                    </div>
                </div>

                <div class="input-wrapper">
                    <label for="amount">Amount (USD)</label>
                    <input type="number" id="amount" name="amount"  min="0" step="0.01" placeholder="Enter amount" required>
                </div>

                <div class="button-group">
                    <button type="submit" class="confirm-btn">PAY NOW</button>
                    <button type="button" class="cancel-btn" onclick="window.location.href='index.html'">CANCEL</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const cardNumberInput = document.getElementById('card_number');
        const cardNumberDisplay = document.getElementById('card-number-display');
        const cardholderNameInput = document.getElementById('cardholder_name');
        const cardholderNameDisplay = document.getElementById('cardholder-name-display');
        const expiryMonthInput = document.getElementById('expiry_month');
        const expiryMonthDisplay = document.getElementById('expiry-month-display');
        const expiryYearInput = document.getElementById('expiry_year');
        const expiryYearDisplay = document.getElementById('expiry-year-display');
        const amountInput = document.getElementById('amount');
        const confirmPayButton = document.querySelector('.confirm-btn');

        // Dynamically generate years for expiry dropdown
        const currentYear = new Date().getFullYear();
        const expiryYearSelect = document.getElementById('expiry_year');
        for (let i = 0; i < 15; i++) { // Generate 15 years from current year
            const year = (currentYear + i).toString().slice(-2); // Get last two digits
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            expiryYearSelect.appendChild(option);
        }

        // Update card number display
        cardNumberInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
            value = value.replace(/(\d{4})(?=\d)/g, '$1 '); // Add space every 4 digits
            cardNumberDisplay.textContent = value.padEnd(19, '*').substring(0, 19);
            e.target.value = value; // Update input field with formatted value
        });

        // Update cardholder name display
        cardholderNameInput.addEventListener('input', (e) => {
            let value = e.target.value.toUpperCase();
            cardholderNameDisplay.textContent = value || 'CARDHOLDER NAME';
        });

        // Update expiry month display
        expiryMonthInput.addEventListener('change', (e) => {
            expiryMonthDisplay.textContent = e.target.value || 'MM';
        });

        // Update expiry year display
        expiryYearInput.addEventListener('change', (e) => {
            expiryYearDisplay.textContent = e.target.value || 'YY';
        });

        // Update button text with amount
        // Removed this event listener as per user request to simply use "PAY NOW"
        // amountInput.addEventListener('input', (e) => {
        //     const amount = parseFloat(e.target.value).toFixed(2);
        //     confirmPayButton.textContent = `CONFIRM AND PAY ${amount}`;
        // });

        // Set initial display values
        cardNumberInput.dispatchEvent(new Event('input'));
        cardholderNameInput.dispatchEvent(new Event('input'));
        expiryMonthInput.dispatchEvent(new Event('change'));
        expiryYearInput.dispatchEvent(new Event('change'));
        // amountInput.dispatchEvent(new Event('input')); // No longer needed for button text

        // Basic validation for card number icon
        cardNumberInput.addEventListener('keyup', (e) => {
            const cardIcon = document.querySelector('.card-number-input .card-icon');
            const cardNumber = e.target.value.replace(/\s/g, ''); // Remove spaces
            cardIcon.className = 'card-icon'; // Reset icon class

            if (cardNumber.startsWith('4')) {
                cardIcon.classList.add('fab', 'fa-cc-visa');
            } else if (cardNumber.startsWith('5')) {
                cardIcon.classList.add('fab', 'fa-cc-mastercard');
            } else if (cardNumber.startsWith('34') || cardNumber.startsWith('37')) {
                cardIcon.classList.add('fab', 'fa-cc-amex');
            } else if (cardNumber.startsWith('6')) {
                cardIcon.classList.add('fab', 'fa-cc-discover');
            } else {
                cardIcon.classList.add('fas', 'fa-credit-card'); // Default icon
            }
        });
    </script>
</body>
</html>